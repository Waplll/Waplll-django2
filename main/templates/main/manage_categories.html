{% extends "main/basic.html" %}

{% block title %}Управление категориями{% endblock %}

{% block content %}
<div class="container">
    <div class="header-flex">
        <h2>Управление категориями</h2>
        <a href="{% url 'main:create_category' %}" class="btn btn-primary btn-lg">
            Добавить категорию
        </a>
    </div>

    {% if categories %}
        <div style="background-color: white; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background-color: #f0f0f0; border-bottom: 2px solid #ddd;">
                        <th style="padding: 15px; text-align: left; color: #1f5278; font-weight: bold;">Название</th>
                        <th style="padding: 15px; text-align: right; color: #1f5278; font-weight: bold; width: 200px;">Действия</th>
                    </tr>
                </thead>
                <tbody>
                    {% for category in categories %}
                    <tr style="border-bottom: 1px solid #ddd;">
                        <td style="padding: 15px;">{{ category.name }}</td>
                        <td style="padding: 15px; text-align: right;">
                            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                                <a href="{% url 'main:edit_category' category.pk %}" class="btn btn-info btn-sm">
                                    Редактировать
                                </a>
                                <a href="{% url 'main:delete_category' category.pk %}" class="btn btn-danger btn-sm" onclick="return confirm('Вы уверены, что хотите удалить эту категорию?');">
                                    Удалить
                                </a>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="alert alert-info">
            <div>
                <h3 style="margin-bottom: 10px; color: #0c5460;">Категории не найдены</h3>
                <p style="margin-bottom: 15px;">Добавьте первую категорию для заявок.</p>
                <a href="{% url 'main:create_category' %}" class="btn btn-primary">
                    Добавить категорию
                </a>
            </div>
        </div>
    {% endif %}

    <div style="margin-top: 30px; text-align: center;">
        <a href="{% url 'main:user_requests' %}" class="btn btn-secondary btn-lg">
            Вернуться к заявкам
        </a>
    </div>
</div>

<style>
    table {
        margin: 20px 0;
    }
</style>
{% endblock %}